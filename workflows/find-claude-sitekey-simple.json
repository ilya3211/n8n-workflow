{
  "name": "Find Claude.ai Sitekey (Simple)",
  "nodes": [
    {
      "parameters": {},
      "id": "a1",
      "name": "Manual Trigger",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "const browserlessToken = '2TRkln4qk0YySXg802f0c9d35a14b6e4fdedbdc9bff4edaac';\n\nconst code = `export default async({page})=>{try{await page.goto('https://claude.ai/new',{waitUntil:'domcontentloaded',timeout:60000});await new Promise(r=>setTimeout(r,8000));const result=await page.evaluate(()=>{const found=[];document.querySelectorAll('[data-sitekey]').forEach(el=>{found.push({method:'data-sitekey',sitekey:el.getAttribute('data-sitekey')});});document.querySelectorAll('script').forEach(s=>{const txt=s.textContent||'';if(txt.includes('sitekey')){const m=txt.match(/['\"]([0-9A-Za-z_-]{25,50})['\"]/g);if(m){m.forEach(k=>{const clean=k.replace(/['\\"]/g,'');if(clean.length>20){found.push({method:'script',sitekey:clean});}});}}});return found;});const html=await page.content();const title=await page.title();return{success:true,found:result,title:title,url:page.url()};}catch(e){return{success:false,error:e.message};}};`;\n\nreturn [{json: {url: `https://production-sfo.browserless.io/function?token=${browserlessToken}&stealth`, body: code}}];"
      },
      "id": "b1",
      "name": "Prepare Simple Search",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [460, 300]
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $json.url }}",
        "sendBody": true,
        "contentType": "raw",
        "rawContentType": "application/javascript",
        "body": "={{ $json.body }}",
        "options": {
          "timeout": 90000
        }
      },
      "id": "c1",
      "name": "Run Search",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [680, 300]
    },
    {
      "parameters": {
        "mode": "runOnceForAllItems",
        "jsCode": "const data = $input.first().json;\n\nif(data.success && data.found && data.found.length > 0){\n  const unique = [...new Set(data.found.map(i=>i.sitekey))];\n  return [{json: {\n    status: '✅ Found!',\n    sitekeys: unique,\n    count: unique.length,\n    first: unique[0],\n    details: data.found,\n    pageTitle: data.title\n  }}];\n} else {\n  return [{json: {\n    status: '❌ Not found',\n    error: data.error || 'No sitekey detected',\n    title: data.title\n  }}];\n}"
      },
      "id": "d1",
      "name": "Show Results",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 300]
    }
  ],
  "connections": {
    "Manual Trigger": {
      "main": [[{"node": "Prepare Simple Search", "type": "main", "index": 0}]]
    },
    "Prepare Simple Search": {
      "main": [[{"node": "Run Search", "type": "main", "index": 0}]]
    },
    "Run Search": {
      "main": [[{"node": "Show Results", "type": "main", "index": 0}]]
    }
  },
  "pinData": {},
  "settings": {"executionOrder": "v1"},
  "staticData": null,
  "tags": [],
  "triggerCount": 0,
  "updatedAt": "2025-01-15T00:00:00.000Z",
  "versionId": "1"
}
